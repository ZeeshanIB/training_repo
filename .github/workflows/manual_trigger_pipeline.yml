name: pipeline
on:
  workflow_dispatch:
     inputs:
      image_name:
        description: Name of the Docker image
        required: true
        type: string
        default: "webapp-docker"
      image_tag:
        description: Tag of the Docker image
        required: true
        type: string
        default: "v2"
env:
  IMAGE_NAME: ${{ inputs.image_name }}
  IMAGE_TAG: ${{ inputs.image_tag }}

defaults:
 run:
  working-directory: ./web-app
jobs:
  call-pyhthonapp_pipeline:
 
    runs-on: ubuntu-latest

    name: Run pipeline
    env:
      IMAGE_NAME: webapp-docker
      IMAGE_TAG: v2
    steps:
    - uses: actions/checkout@v3
    - name: Trigger pipeline
      uses: ./.github/workflows/pythonapp_pipeline.yml
      with:
        image_name: ${{ env.IMAGE_NAME }}
        image_tag: ${{ env.IMAGE_TAG }}  
    
        secrets: inherit